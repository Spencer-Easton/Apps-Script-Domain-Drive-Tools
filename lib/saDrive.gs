(function(scope,nameSpace){
	/*
	 * Library Code
	 */
	function Init(a){return super_.getToken=a,super_}function checkToken(){if(!('getToken'in super_))throw new Error('{error:\'Token Service not set use Init()\'}');if(typeof super_.getToken!=='function')throw new Error('{error:\'Token Service is not a valid function\'}');var c='https://www.googleapis.com/oauth2/v1/tokeninfo?access_token='+super_.getToken();var a='https://www.googleapis.com/auth/drive';var b=JSON.parse(UrlFetchApp.fetch(c).getContentText());return'error'in b?{error:'Invalid Token'}:b.scope.indexOf(a)==-1?{error:'Token does not contain the required scope of '+a}:{success:'Valid Token'}}function ServiceAccount(a){return new ServiceAccount_(a)}function ServiceAccount_(f){function b(b,a){var a=a||{};return a.additionalQuery?a.additionalQuery=' and '+a.additionalQuery:a.additionalQuery='',b+=a.additionalQuery,a.byPage||a.nextPageToken?d(b,a.nextPageToken,a.byPage):e(b)}function d(k,f,g){var h=super_.getToken();var e=[];var i={method:'GET',contentType:'application/json',headers:{Authorization:'Bearer '+h},muteHttpExceptions:!0};var b='https://www.googleapis.com/drive/v2/files?q='+k;f&&(b+='&pageToken='+f),g&&(b+='&maxResults='+g),b=encodeURI(b);var j=UrlFetchApp.fetch(b,i);var a=JSON.parse(j.getContentText());for(var c in a.items)e.push({name:a.items[c].title,id:a.items[c].id,link:a.items[c].selfLink});var d={};return d.fileObjs=e,a.nextPageToken&&(d.nextPageToken=a.nextPageToken),d}function e(b){var i=super_.getToken();var g=[];var c='';var b=encodeURIComponent(b);var j={method:'GET',contentType:'application/json',headers:{Authorization:'Bearer '+i},muteHttpExceptions:!0};var d='https://www.googleapis.com/drive/v2/files?q='+b;do{var e=UrlFetchApp.fetch(d,j);if(e.getResponseCode()!=200){Logger.log(e);break}var a=JSON.parse(e.getContentText());d='https://www.googleapis.com/drive/v2/files?q='+b;for(var f in a.items)g.push({name:a.items[f].title,id:a.items[f].id,link:a.items[f].selfLink});c=a.nextPageToken,d+='&pageToken='+encodeURIComponent(c)}while(c!=undefined);var h={};return h.fileObjs=g,h}function c(a){return encodeURI(a).split(/%..|./).length-1}var a={};return a.transferFileToUser=function(f,g){var a=super_.getToken();var b='https://www.googleapis.com/drive/v2/files/'+f+'/permissions?sendNotificationEmails=false';var c={role:'owner',value:g,type:'user'};var d={method:'POST',contentType:'application/json',headers:{Authorization:'Bearer '+a},payload:JSON.stringify(c),muteHttpExceptions:!0};var e=UrlFetchApp.fetch(b,d);return JSON.parse(e.getContentText())},a.transferFolderToUser=function(a,b){return this.transferFileToUser(a,b)},a.fetchPermissionId=function(b){var a=super_.getToken();return JSON.parse(UrlFetchApp.fetch('https://www.googleapis.com/drive/v2/permissionIds/'+b,{headers:{Authorization:'Bearer '+a}})).id},a.getAllFolders=function(c){var a='mimeType = \'application/vnd.google-apps.folder\'';return b(a,c)},a.getFilesInFolder=function(c,d){var a='\''+c+'\' in parents and mimeType != \'application/vnd.google-apps.folder\'';return b(a,d)},a.batchPermissionChange=function(f,g){var h=super_.getToken();var i='https://www.googleapis.com/batch';var d=JSON.stringify({role:'owner',value:g,type:'user'});var j=c(d);const b='-------DriveOwnershipTools';const k='\r\n--'+b+'\r\n';const l='\r\n--'+b+'--';var a='';for(var e in f)a+=k,a+='Content-Type: application/http\r\n',a+='Content-ID: <item'+e+':'+g+'>\r\n',a+='Content-Transfer-Encoding: binary\r\n\r\n',a+='POST /drive/v2/files/'+f[e]+'/permissions\r\n',a+='Content-Type: application/json\r\n',a+='Content-Length: '+j+'\r\n\r\n',a+=d+'\r\n\r\n';a+=l;var m={method:'POST',headers:{Authorization:'Bearer '+h},contentType:'multipart/mixed; boundary='+b,contentLength:c(a).toString(),payload:a,muteHttpExceptions:!0};var n=UrlFetchApp.fetch(i,m);return n.getContentText()},a}var super_=this
	/*
	 * End Library Code
	 */
var publicAPI = { 
    Init:Init,checkToken:checkToken,ServiceAccount:ServiceAccount
                };
scope[nameSpace] = scope[nameSpace] || publicAPI;
})(this, "saDrive");